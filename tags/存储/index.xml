<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>å­˜å‚¨ | ç‰¹å€«è˜‡çš„æ—¥èˆ‡å¤œ</title>
    <link>https://blog.cklau.cc/tags/%E5%AD%98%E5%82%A8/</link>
      <atom:link href="https://blog.cklau.cc/tags/%E5%AD%98%E5%82%A8/index.xml" rel="self" type="application/rss+xml" />
    <description>å­˜å‚¨</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en</language><lastBuildDate>Thu, 19 Sep 2024 00:11:21 +0800</lastBuildDate>
    <item>
      <title>ğŸ§‘ğŸ¿â€ğŸ’» Homelab: Cloudflare is All your Need, or Not</title>
      <link>https://blog.cklau.cc/post/my-homelab-8/</link>
      <pubDate>Thu, 19 Sep 2024 00:11:21 +0800</pubDate>
      <guid>https://blog.cklau.cc/post/my-homelab-8/</guid>
      <description>&lt;p&gt;å›åˆ°åŸç‚¹ï¼Œåˆå¼€å§‹äº†ä¸€å¹´ä¸€åº¦çš„ Homelab æŠ˜è…¾ã€‚è¿™ä¸€æ¬¡ï¼Œ æ‰“ç®—æ•´ç‚¹ã€Œèµ·å¤œã€çº§æ–¹æ¡ˆ :)&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æåŠäº†ä¸€äº›ç½‘ç»œç›¸å…³çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚å¦‚ä½•ä½¿ç”¨ Cloudflare Tunnel è¿›è¡Œâ€œè‡ªå»ºæœåŠ¡å…¨çƒåŠ é€Ÿâ€ã€‚å…¶ä¸­ï¼Œä¹ŸæåŠäº†å¯ä»¥è‡ªå»º GeoDNS è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘å°†è¯¦ç»†æè¿°å„ç§æ–¹æ¡ˆçš„å®è·µç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è‡ªå»º-geodns-ä»¥æ‘†è„±-cloudflare-å„æ–­&#34;&gt;è‡ªå»º GeoDNS ä»¥æ‘†è„± Cloudflare å„æ–­&lt;/h2&gt;
&lt;p&gt;GeoDNS æ˜¯ä¸€ç§åŸºäºè¯·æ±‚ä½ç½®çš„æµé‡åˆ†é…è¿‡ç¨‹ï¼Œé€šè¿‡åˆ¤æ–­è¯·æ±‚ IP çš„åœ°ç†ä½ç½®ï¼Œåˆ†é…ç¦»ä»–æœ€è¿‘çš„å‡ºå£ IP ä»¥è¾¾åˆ°åŸºäºåœ°ç†è·¯ç”±çš„æµé‡ä¼˜åŒ–ã€‚è¯´äººè¯å°±æ˜¯å„ä¸ªå¤§æ´²åˆ†åˆ«ä¸€ä¸ª IPã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œè°ä¼šæä¾›è¿™ç§çœ‹èµ·æ¥å°±å¾ˆå¥½çš„æœåŠ¡å‘¢ï¼Ÿèµ›åšè©è¨è¡¨ç¤ºï¼Œæˆ‘ä»¬ Anycast èµ·å®¶ï¼Œå¤©ç„¶æ— æ³•æä¾› GeoDNSã€‚å› ä¸ºå¯¹äº Anycast DNS æ¥è¯´ï¼Œä»–ä»¬ä¼šå°†ä¸€ä¸ª IP é€šè¿‡ BGP çš„æ–¹å¼åœ¨å¤šåœ°å®£å‘Šï¼Œé‚£ä¹ˆå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œèƒ½å¦åˆ°è¾¾ç¦»ä»–ä»¬æœ€è¿‘çš„ IP å°±å–å†³äºæœ¬åœ°ç½‘ç»œæä¾›å•†çš„æ¥å…¥æƒ…å†µå’Œä»‹å…¥æƒ…å†µã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå¦‚æœå½“åœ°ç½‘ç»œæœåŠ¡å•†åŸºäºä¸€äº›åŸå› ï¼ˆä¾‹å¦‚å®‰å…¨å’Œå†…å®¹åˆè§„ç­‰åŸå› ï¼‰å°† CDN æä¾›å•†çš„ IP æ®µè¿›è¡Œè·¯ç”±çº§åˆ«çš„åŠ£åŒ–ï¼Œåˆ™æ— è®º CDN æä¾›å•†å¤šä¹ˆçš„åŠªåŠ›ï¼Œä¹Ÿæ— æ³•è¾¾åˆ°åŠ é€Ÿçš„ç›®çš„ã€‚ä»è®¡ç®—æœºç½‘ç»œæ¥è¯´ï¼ŒAnycast çš„å®ç°æ˜¯åœ¨ç½‘ç»œå±‚ï¼Œè€Œ GeoDNS æ˜¯åœ¨åº”ç”¨å±‚ï¼Œæ‰€ä»¥ Anycast ä¸çŸ¥é“è¯·æ±‚è€…çš„ IP ä½ç½®ï¼Œæ‰€ä»¥ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼šè™½ç„¶åœ¨ DNS çœ‹æ¥è¿™ä¸ªè¯·æ±‚æ›´åŠ æ¥è¿‘æŸåœ°çš„æœåŠ¡å™¨ï¼Œä½†å®é™…ä¸Šè¿™ä¸ª CDN ç«™ç‚¹ç¦»åŸç«™æ›´è¿œã€‚&lt;/p&gt;
&lt;p&gt;åŸºäºä»¥ä¸Šçš„å‡ ç‚¹ï¼Œæˆ‘é€‰æ‹©æ­å»º GeoDNS æ¥æ›¿ä»£ Cloudflare çš„ Anycast&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æƒå¨-dns-çš„å®‰è£…ä¸é…ç½®authoritative-dns&#34;&gt;æƒå¨ DNS çš„å®‰è£…ä¸é…ç½®ï¼ˆAuthoritative DNSï¼‰&lt;/h3&gt;
&lt;h4 id=&#34;å‰æ&#34;&gt;å‰æ&lt;/h4&gt;
&lt;p&gt;ç°å­˜æœ‰ä¸å°‘å¼€æºæƒå¨ DNS è½¯ä»¶å¯ä»¥é€‰æ‹©ï¼Œæ¯”å¦‚ Bind9/PowerDNS ç­‰ç­‰ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ä½¿ç”¨ PowerDNSï¼ŒåŸå› æ˜¯å› ä¸ºä»–æœ‰ pdns-admin å¯ä»¥è®©æˆ‘è¿›è¡Œ web ç®¡ç†ï¼Œè€Œä¸æ˜¯é¢å¯¹å„ç§é…ç½®æ–‡ä»¶ï¼Œ åŒæ—¶å®ƒæ˜¯ä½¿ç”¨æ•°æ®åº“è¿›è¡Œ DNS çºªå½•å­˜å‚¨ï¼Œè€Œä¸æ˜¯è·Ÿ BIND9 ä¸€æ ·çš„æ–‡æœ¬å­˜å‚¨ï¼Œæ›´åŠ é€‚åˆé«˜å¯ç”¨ã€‚å› ä¸ºæ¶‰åŠåˆ°é«˜å¯ç”¨ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸¤å° VPSï¼Œæˆ‘é€‰æ‹©äº†ä¸€å°é¦™æ¸¯çš„æœåŠ¡å™¨å’Œä¸€å°çº½çº¦çš„æœåŠ¡å™¨ä½œä¸º ns1 å’Œ ns2ã€‚åŒæ—¶ï¼Œé™¤äº†éœ€è¦ä½¿ç”¨çš„åŸŸåï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–çš„åŸŸååˆ†é…ç»™ DNS æœåŠ¡å™¨ï¼Œæ‰€ä»¥ï¼ŒåŸºç¡€å‡†å¤‡å¦‚ä¸‹&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŸŸå&lt;/th&gt;
&lt;th&gt;IPV4&lt;/th&gt;
&lt;th&gt;IPV6&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ns1.example.dns&lt;/td&gt;
&lt;td&gt;191.103.113.114&lt;/td&gt;
&lt;td&gt;79cc:5f8f:47b1:963e:d248:70ea:0186:b842&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ns2.example.dns&lt;/td&gt;
&lt;td&gt;31.84.179.51&lt;/td&gt;
&lt;td&gt;9c7d:f2b6:1777:1904:fcfc:3a24:cccd:c0a6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://www.example.com&#34;&gt;www.example.com&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;249.209.110.226,160.38.17.187,66.167.146.39&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœ¨æ­å»ºæƒå¨ DNS æœåŠ¡å™¨çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¸¸å¸¸å¬è¯´ä¸€ä¸ªè¯å«åšèƒ¶æ°´çºªå½• - Glue Recordï¼Œè¿™ä¸ªçºªå½•ä¹Ÿæ˜¯ä¸€ç§ DNS çºªå½•ï¼Œä½†æ˜¯ä¿å­˜åœ¨åŸŸåæ³¨å†Œå±€çš„ DNS æœåŠ¡å™¨ä¸Šï¼Œä¾‹å¦‚æŸ¥è¯¢ &lt;code&gt;www.example.com&lt;/code&gt; çš„ çºªå½•æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚é¦–å…ˆå»åˆ°é€’å½’ DNS æœåŠ¡å™¨ &lt;code&gt;R&lt;/code&gt;ï¼Œ ç„¶å &lt;code&gt;R&lt;/code&gt; å†å»è¯¢é—®å¯¹åº”çš„ DNS æ ¹æœåŠ¡å™¨ &lt;code&gt;A0&lt;/code&gt;ï¼Œ å½“ç„¶ï¼Œ&lt;code&gt;A0&lt;/code&gt; å¹¶ä¸å­˜æ”¾æ‰€æœ‰çš„çºªå½•ï¼Œä»–åªä¼šå‘Šè¯‰ &lt;code&gt;R&lt;/code&gt; å¯¹åº”çš„åŸŸå &lt;code&gt;example.com&lt;/code&gt; åº”è¯¥å»å¯¹åº”çš„æƒå¨æœåŠ¡å™¨ &lt;code&gt;A1&lt;/code&gt; è¿›è¡ŒæŸ¥è¯¢ã€‚ æ‰€ä»¥ï¼Œèƒ¶æ°´çºªå½•å®é™…ä¸Šå°±æ˜¯ &lt;code&gt;A0&lt;/code&gt; åˆ° &lt;code&gt;A1&lt;/code&gt; çš„æŒ‡å‘ã€‚è€Œæ‰€æœ‰çš„æ ¹æœåŠ¡å™¨éƒ½å¯ä»¥åˆ° &lt;a href=&#34;https://www.iana.org/domains/root/servers&#34;&gt;IANA&lt;/a&gt; æŸ¥åˆ°ï¼Œ å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ &lt;code&gt;dig&lt;/code&gt; æŸ¥åˆ°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;base&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{}&lt;/span&gt; ~ dig com. NS + short
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; Invalid option
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;; &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.6 &amp;lt;&amp;lt;&amp;gt;&amp;gt; com. NS + short
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; global options: +cmd
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; Got answer:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; -&amp;gt;&amp;gt;HEADER&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 25108
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; flags: qr rd ra; QUERY: 1, ANSWER: 13, AUTHORITY: 0, ADDITIONAL: 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; OPT PSEUDOSECTION:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;; EDNS: version: 0, flags:; udp: 1220
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; QUESTION SECTION:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;com.				IN	NS
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; ANSWER SECTION:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	h.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	f.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	k.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	b.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	c.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	g.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	d.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	m.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	a.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	j.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	e.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	i.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;com.			35830	IN	NS	l.gtld-servers.net.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; Query time: 15 msec
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; SERVER: 192.168.1.1#53(192.168.1.1)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; WHEN: Thu Sep 26 13:43:28 IST 2024
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; MSG SIZE  rcvd: 256
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; Got answer:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;;; -&amp;gt;&amp;gt;HEADER&amp;lt;&amp;lt;- opcode&lt;/span&gt;: QUERY, status: NXDOMAIN, id: &lt;span style=&#34;color:#ae81ff&#34;&gt;48582&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; OPT PSEUDOSECTION:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;; EDNS: version: 0, flags:; udp: &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; QUESTION SECTION:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;short.				IN	A
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; Query time: &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; msec
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; SERVER: 192.168.1.1#53&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;192.168.1.1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; WHEN: Thu Sep &lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt; 13:43:28 IST &lt;span style=&#34;color:#ae81ff&#34;&gt;2024&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;;; MSG SIZE  rcvd: &lt;span style=&#34;color:#ae81ff&#34;&gt;34&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ° &lt;code&gt;.com&lt;/code&gt;è¿™ä¸ªåŸŸåæ˜¯åœ¨ &lt;code&gt;a.gtld-servers.net.&lt;/code&gt; åˆ° &lt;code&gt;l.gtld-servers.net.&lt;/code&gt; è¿™äº› DNS æ ¹æœåŠ¡å™¨è¿›è¡Œçºªå½•ã€‚å½“ç„¶ï¼Œè¿™é‡Œæ‰¯è¿œäº†ï¼Œè¿˜æ˜¯å›åˆ°èƒ¶æ°´çºªå½•ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒåŸŸåæ³¨å†Œå•†çš„ç½‘ç«™éƒ½å¯ä»¥æ·»åŠ èƒ¶æ°´çºªå½•ï¼Œè€Œæœ‰çš„æ³¨å†Œå•†åˆ™æ˜¯éœ€è¦ä»˜è´¹æ‰èƒ½æ·»åŠ ï¼Œè¿™å–å†³äºä½ çš„æœåŠ¡æä¾›å•†ã€‚åŒæ—¶ï¼Œæœ‰çš„æ³¨å†Œå•†å¹¶æ²¡æœ‰ä½¿ç”¨ ã€Œèƒ¶æ°´çºªå½•ã€è¿™ä¸ªè¯ï¼Œè€Œæ˜¯ä½¿ç”¨ ã€Œæ³¨å†Œ DNS æœåŠ¡å™¨ã€æˆ–è€… ã€ŒDNS Hostã€ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨çš„&lt;a href=&#34;https://cloud.tencent.com/document/product/242/54158&#34;&gt;è…¾è®¯äº‘&lt;/a&gt;å°±æ˜¯ç§°ä½œ ã€ŒDNS Hostã€å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;center&gt;
    &lt;img src=&#34;https://32cf906.webp.li/2024/09/dns-dnspod.png&#34; width=&#34;70%&#34; alt=&#34;DNS èƒ¶æ°´çºªå½•&#34;&gt;
&lt;/center&gt;
&lt;p&gt;åœ¨å®Œæˆä»¥åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°† &lt;code&gt;exmaple.dns&lt;/code&gt; çš„ NS æœåŠ¡å™¨æ”¹ä¸º &lt;code&gt;ns1.example.dns&lt;/code&gt; å’Œ &lt;code&gt;ns2.example.dns&lt;/code&gt;&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å®‰è£…-powerdns-å’Œ-mariadb-ä¸-powerdns-åˆå§‹é…ç½®&#34;&gt;å®‰è£… PowerDNS å’Œ MariaDB ä¸ PowerDNS åˆå§‹é…ç½®&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šéƒ½å®‰è£… PowerDNS å’Œ MariaDBï¼Œè¿™é‡Œï¼Œæˆ‘è®© NS1 ä½œä¸ºä¸»è¦èŠ‚ç‚¹è€Œ NS2 ä½œä¸ºå¤‡ä»½èŠ‚ç‚¹ (ä¸¤å°æœåŠ¡å™¨å‡ä½¿ç”¨ Debian 12)ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo su
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;apt-get update &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get upgrade -y 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯¼å…¥ PowerDNS å’Œ MariaDB å®˜æ–¹æºå’Œç­¾å å¹¶ å®‰è£…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -sSL https://repo.powerdns.com/FD380FBB-pub.asc | gpg --dearmor &amp;gt; /usr/share/keyrings/powerdns.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/apt/sources.list.d/pdns.list &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/powerdns.gpg] http://repo.powerdns.com/debian $(lsb_release -sc)-auth-49 main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/powerdns.gpg] http://repo.powerdns.com/debian $(lsb_release -sc)-rec-50 main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/powerdns.gpg] http://repo.powerdns.com/debian $(lsb_release -sc)-dnsdist-19 main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## ä¼˜å…ˆä½¿ç”¨ PowerDNS å®˜æ–¹æºè¿›è¡Œå®‰è£…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt;&amp;gt; /etc/apt/preferences.d/pdns &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Package: pdns-*
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Pin: origin repo.powerdns.com
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Pin-Priority: 600
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -sSL https://mariadb.org/mariadb_release_signing_key.asc | gpg --dearmor &amp;gt; /usr/share/keyrings/mariadb.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;deb [arch=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;dpkg --print-architecture&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; signed-by=/usr/share/keyrings/mariadb.gpg] https://mirror-cdn.xtom.com/mariadb/repo/11.4/debian &lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;lsb_release -sc&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; main&amp;#34;&lt;/span&gt; &amp;gt; /etc/apt/sources.list.d/mariadb.list
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## éœ€è¦å®‰è£… geoip æ’ä»¶ï¼Œä¸ºåç»­é…ç½® geodns åšå‡†å¤‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;apt-get update &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install pdns-server pdns-backend-mysql pdns-backend-geoip mariadb-server 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## é…ç½®æ•°æ®åº“åŒæ­¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### åœ¨ NS1 é‡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir /var/lib/mysql-bin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;chown mysql:mysql /var/lib/mysql-bin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/mysql/mariadb.conf.d/61-master.cnf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;[mysqld]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;skip-host-cache
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;skip-name-resolve
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;bind-address = 0.0.0.0 # ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»– NS2 å¯ä»¥è®¿é—®åˆ°çš„ NS1 çš„ IP 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;server-id = $SRANDOM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;log-bin = /var/lib/mysql-bin/binlog
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;expire_logs_days = 7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### é€šè¿‡ iptables é™åˆ¶ 3306 çš„è®¿é—®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iptables -I INPUT -p tcp --dport &lt;span style=&#34;color:#ae81ff&#34;&gt;3306&lt;/span&gt; -j DROP
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iptables -I INPUT -s 127.0.0.1 -p tcp --dport &lt;span style=&#34;color:#ae81ff&#34;&gt;3306&lt;/span&gt; -j ACCEPT 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iptables -I INPUT -s &amp;lt;NS2 çš„ IP æˆ–è€…å…¶ä»–æŒ‡å®š IP æ®µ&amp;gt; -p tcp --dport &lt;span style=&#34;color:#ae81ff&#34;&gt;3306&lt;/span&gt; -j ACCEPT  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### æ–°å»ºä¸€ä¸ª backup ç”¨æˆ·ï¼Œä½¿å¾— NS2 å¯ä»¥è®¿é—® NS1 æ‰€æœ‰æ•°æ®åº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* to &amp;#39;backup&amp;#39;@&amp;#39;%&amp;#39; identified by &amp;#39;backup_pass&amp;#39;;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### é‡å¯ MariaDB å¹¶æŸ¥çœ‹è¿è¡Œæƒ…å†µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl restart mariadb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl status mariadb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### åœ¨ NS2 é‡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir /var/lib/mysql-bin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;chown mysql:mysql /var/lib/mysql-bin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/mysql/mariadb.conf.d/61-slave.cnf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;[mysqld]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;skip-host-cache
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;skip-name-resolve
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;server-id = $SRANDOM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;relay-log = /var/lib/mysql-bin/relaylog
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;expire_logs_days = 7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/expire_logs_days/#expire_logs_days/g&amp;#39;&lt;/span&gt; /etc/mysql/mariadb.conf.d/50-server.cnf
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### ä»…å…è®¸æœ¬æœºè®¿é—® 3306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iptables -I INPUT -p tcp --dport &lt;span style=&#34;color:#ae81ff&#34;&gt;3306&lt;/span&gt; -j DROP
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iptables -I INPUT -s 127.0.0.1 -p tcp --dport &lt;span style=&#34;color:#ae81ff&#34;&gt;3306&lt;/span&gt; -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### é‡å¯ MariaDB å¹¶æŸ¥çœ‹è¿è¡Œæƒ…å†µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl restart mariadb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl status mariadb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### æ£€æŸ¥ NS1 å’Œ NS2 ä¸¤å°æœåŠ¡å™¨çš„æ•°æ®åº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### åœ¨ NS1 ä¸­è¿è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;show binary logs;\G&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# å¦‚å‡ºç° binlog.000001 å’Œ file size ä¸º 325 åˆ™æ­£å¸¸ï¼ˆæ–°å®‰è£…çš„æƒ…å†µä¸‹ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### åœ¨ NS2 ä¸­è¿è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CHANGE MASTER TO MASTER_HOST=&amp;#39;&amp;lt;NS1-IP ADDR&amp;gt;&amp;#39;, MASTER_USER=&amp;#39;backup&amp;#39;, MASTER_PASSWORD=&amp;#39;backup_pass&amp;#39;, MASTER_PORT=3306, MASTER_LOG_FILE=&amp;#39;binlog.000001&amp;#39;, MASTER_LOG_POS=325; START SLAVE; SHOW SLAVE STATUS\G&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### å¯¼å…¥ PowerDNS æ•°æ®åº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### åœ¨ NS1 ä¸­è¿è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -u root
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CREATE DATABASE pdns_database DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;GRANT ALL ON pdns_database.* TO &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pdns_user&amp;#39;&lt;/span&gt;@&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;%&amp;#39;&lt;/span&gt; IDENTIFIED BY &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pdns_password&amp;#39;&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;# pdns_user å’Œ pdns_password æ˜¯ PowerDNS æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FLUSH PRIVILEGES; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;EXIT;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd /usr/share/pdns-backend-mysql/schema
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -u pdns_user --default-character-set&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;utf8mb4 -p pdns_database &amp;lt; schema.mysql.sql
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -u pdns_user --default-character-set&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;utf8mb4 -p pdns_database &amp;lt; enable-foreign-keys.mysql.sql
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#### åœ¨ NS2 ä¸­è¿è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mariadb -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;show databases;\G&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# å¦‚å·²ç»åŒæ­¥ pdns_database åˆ™ä¸ºæ­£å¸¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨å®Œæˆæ•°æ®åº“è®¾ç½®åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å¯¹ PowerDNS è¿›è¡Œåˆå§‹åŒ–é…ç½®ï¼Œé¦–å…ˆåˆ é™¤é»˜è®¤å®‰è£…çš„ &lt;code&gt;/etc/powerdns/pdns.d/bind.conf&lt;/code&gt;, ç„¶åæ·»åŠ ä¸€ä¸ª &lt;code&gt;/etc/powerdns/pdns.d/dns.conf&lt;/code&gt; å¹¶è¾“å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt;&amp;gt; /etc/powerdns/pdns.d/dns.conf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;launch=gmysql
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;gmysql-host=localhost
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;gmysql-user=pdns_user # æ•°æ®åº“ç”¨æˆ·å
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;gmysql-dbname=pdns_database # æ•°æ®åº“å
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;gmysql-password=pdns_password # æ•°æ®åº“å¯†ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;gmysql-dnssec=yes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;default-soa-content=ns1.example.dns hostmaster.example.dns 0 3600 14400 604800 3600
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;api=yes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;api-key=random_api_key # api key å¯ä»¥éšæ„æ›´æ¢ï¼Œæ¯”å¦‚ä½¿ç”¨ openssl ç”Ÿæˆï¼šopenssl rand -base64 16
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;local-address=0.0.0.0 ::
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;local-port=53
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;webserver-address=0.0.0.0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;webserver-allow-from=127.0.0.1, ::1, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;webserver-port=8081
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨å®Œæˆé…ç½®åï¼Œéœ€è¦é‡å¯ PowerDNSï¼š&lt;code&gt;systemctl restart pdns&lt;/code&gt;ï¼Œä½†æ˜¯åœ¨é‡å¯ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ° PowerDNS å ç”¨å¾—æ˜¯ &lt;code&gt;53&lt;/code&gt; ç«¯å£ï¼Œä½†æ˜¯é»˜è®¤æƒ…å†µä¸‹ï¼ŒDebian/Ubuntu éƒ½ä¼šè¢«ç³»ç»Ÿçš„ &lt;code&gt;systemd-resolved&lt;/code&gt; å ç”¨, æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å…³é—­å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ä»…é’ˆå¯¹ Debian 11/12ï¼Œå…¶ä»–ç³»ç»Ÿè¯·å‚è€ƒå¯¹åº”ç³»ç»Ÿçš„æ•™ç¨‹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo su 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl stop systemd-resolved &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl disable systemd-resolved
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cp /etc/resolv.conf /etc/resolv.conf.bak &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /etc/resolv.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt;&amp;gt; /etc/resolv.conf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;nameserver  1.1.1.1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;nameserver  8.8.8.8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl restart networking
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;powerdns-admin-å®‰è£…&#34;&gt;PowerDNS-Admin å®‰è£…&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/PowerDNS-Admin/PowerDNS-Admin&#34;&gt;PowerDNS Admin&lt;/a&gt; æ˜¯ä¸€ä¸ªåŸºäº Django çš„ PowerDNS ç®¡ç†è½¯ä»¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šå•ç‹¬éƒ¨ç½²è€Œä¸æ˜¯éƒ¨ç½²åœ¨ NS1 æˆ–è€… NS2 ä¸Šã€‚GitHub ä¸Šæœ‰å¯¹åº”çš„ Docker å’Œæœ¬åœ°å®‰è£…æ•™ç¨‹ï¼Œè¿™é‡Œï¼Œæˆ‘å·² K3s/K8s ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåˆ›å»º namespaceï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Namespace&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååˆ›å»º PV å’Œ PVCï¼Œè¿™æ˜¯ä¸ºäº†æŒä¹…åŒ–å­˜å‚¨æ•°æ®åº“ä¸Šçš„æ•°æ®ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ &lt;code&gt;local-host&lt;/code&gt; çš„å­˜å‚¨æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„å­˜å‚¨åç«¯ï¼Œæ¯”å¦‚ NFS æˆ–è€… Cephï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;PersistentVolume&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-pv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;capacity&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;storage&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;10Gi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;accessModes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;ReadWriteMany&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;persistentVolumeReclaimPolicy&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Retain&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;storageClassName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;local-storage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;local&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;path&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/data/pdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;nodeAffinity&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;required&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;nodeSelectorTerms&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;matchExpressions&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;key&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;kubernetes.io/hostname&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;operator&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;In&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;values&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          - &lt;span style=&#34;color:#ae81ff&#34;&gt;base-server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;PersistentVolume&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-mysql-pv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;capacity&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;storage&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;10Gi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;accessModes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;ReadWriteMany&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;persistentVolumeReclaimPolicy&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Retain&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;storageClassName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;local-storage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;local&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;path&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/data/pdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;nodeAffinity&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;required&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;nodeSelectorTerms&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;matchExpressions&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;key&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;kubernetes.io/hostname&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;operator&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;In&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;values&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          - &lt;span style=&#34;color:#ae81ff&#34;&gt;base-server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;PersistentVolumeClaim&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;accessModes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;ReadWriteMany&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;resources&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;requests&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;storage&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;10Gi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;storageClassName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;local-storage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;volumeName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-pv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;PersistentVolumeClaim&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-mysql-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;accessModes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;ReadWriteMany&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;resources&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;requests&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;storage&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;10Gi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;storageClassName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;local-storage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;volumeName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-mysql-pv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éšååˆ›å»º &lt;code&gt;Deployment&lt;/code&gt;, &lt;code&gt;Serivce&lt;/code&gt; å’Œ &lt;code&gt;Ingress&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;apps/v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Deployment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;selector&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;matchLabels&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;app&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;template&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;labels&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;app&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;nodeName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;base-server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;containers&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;image&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdnsadmin/pda-legacy:latest&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;imagePullPolicy&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;IfNotPresent&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;ports&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;containerPort&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;env&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;SECRET_KEY&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;random-secret-key&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;SQLALCHEMY_DATABASE_URI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mysql://powerdns-admin-user:powerdns-admin-password@127.0.0.1/powerdns-admin-database&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;GUNICORN_TIMEOUT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;60&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;GUNICORN_WORKERS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;4&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;GUNICORN_LOGLEVEL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;OFFLINE_MODE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;False&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;volumeMounts&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;mountPath&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns-admin-mariadb&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;image&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;mariadb:11.4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;ports&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;containerPort&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;env&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mysql_root_password&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;MYSQL_DATABASE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;powerdns-admin-database&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;MYSQL_USER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;powerdns-admin-user&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;MYSQL_PASSWORD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;value&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;powerdns-admin-password&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;volumeMounts&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-mysql-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;mountPath&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/var/lib/mysql&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;volumes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;persistentVolumeClaim&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;claimName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-mysql-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;persistentVolumeClaim&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;claimName&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns-mysql-pvc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Service&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;selector&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;app&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;ports&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;protocol&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;TCP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;port&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;targetPort&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;type&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ClusterIP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;networking.k8s.io/v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Ingress&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ingress-pdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;rules&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;host&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;pdns.example.com&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;http&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;paths&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;path&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;pathType&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Prefix&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;backend&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;service&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;powerdns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;port&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#f92672&#34;&gt;number&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨å†Œçš„ç¬¬ä¸€ä¸ªè´¦å·å°±æ˜¯ Admin è´¦å·ï¼Œå¦‚æœæ²¡æœ‰å¤šäººä½¿ç”¨çš„éœ€æ±‚å³å¯åœ¨ &lt;code&gt;Settings - Authentication&lt;/code&gt; é‡Œå…³é—­ &lt;code&gt;Allow users to sign up&lt;/code&gt;ã€‚åœ¨ Server å¡«å…¥ NS1 æˆ–è€… NS2 çš„ä¿¡æ¯å³å¯ã€‚ è€Œåï¼Œå°±å¯ä»¥å¼€å§‹é…ç½® GeoDNS äº†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;geodns-é…ç½®&#34;&gt;GeoDNS é…ç½®&lt;/h4&gt;
&lt;p&gt;ç”±äº Maxmind GeoIP å¼€å§‹è¦æ±‚ GeoLite çš„ç”¨æˆ·æ³¨å†Œè´¦å·å¹¶ä½¿ç”¨å¯†é’¥æ‰èƒ½ä¸‹è½½æ•°æ®åº“ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦å» &lt;a href=&#34;https://dev.maxmind.com/geoip/geolite2-free-geolocation-data&#34;&gt;GeoLite2&lt;/a&gt; æ³¨å†Œè´¦å·å¹¶åˆ›å»º License Keyã€‚åœ¨å¾—åˆ° Key ä»¥åï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ NS1 å’Œ NS2 ç§å®‰è£… &lt;code&gt;sudo apt-get install geoipupdate&lt;/code&gt;ï¼Œå¹¶å°† &lt;code&gt;AccountID&lt;/code&gt; å’Œ &lt;code&gt;License Key&lt;/code&gt; å­˜å…¥æœåŠ¡å™¨ä¸­:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo su 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/GeoIP.conf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;AccountID XXXXXX
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;LicenseKey XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EditionIDs GeoLite2-Country GeoLite2-City GeoLite2-ASN
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo geoipupdate -v 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‰€æœ‰çš„ &lt;code&gt;.mmdb&lt;/code&gt; éƒ½ä¼šå­˜æ”¾åˆ° &lt;code&gt;/usr/share/GeoIP&lt;/code&gt; è¿™ä¸ªè·¯å¾„ä¸‹é¢ã€‚å›åˆ° NS1 å’Œ NS2 çš„ &lt;code&gt;/etc/powerdns/pdns.d/dns.conf&lt;/code&gt; é‡Œï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹å¹¶é‡æ–°å¯åŠ¨ PowerDNS å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;enable-lua-records&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;yes &lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨ lua script &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;launch&lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt;geoip &lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨ geoip æ’ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;geoip-database-files&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/usr/share/GeoIP/GeoLite2-City.mmdb /usr/share/GeoIP/GeoLite2-Country.mmdb /usr/share/GeoIP/GeoLite2-ASN.mmdb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;log-dns-queries&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;yes 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å›åˆ° PowerDNS-Admin é‡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ &lt;code&gt;Settings - Zone Records&lt;/code&gt; é‡Œæ‰“å¼€ LUA æ‰èƒ½åœ¨è§£æçºªå½•é‡Œä½¿ç”¨ lua scriptã€‚Lua çºªå½•æœ‰å¾ˆå¤šç”¨æ³•ï¼Œ è¯¦ç»†å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://doc.powerdns.com/authoritative/lua-records/&#34;&gt;å®˜ç½‘&lt;/a&gt;, è¿™é‡Œï¼Œæˆ‘åªä»‹ç» GeoDNS éœ€è¦æ€ä¹ˆè®¾ç½®ï¼š&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é¦–å…ˆè®¾ç½®ä¸€æ¡ Lua çºªå½•ç»™ &lt;code&gt;www.example.com&lt;/code&gt;ï¼š&lt;code&gt;A    &amp;quot;pickclosest({&#39;249.209.110.226&#39;,&#39;160.38.17.187&#39;,&#39;66.167.146.39&#39;})&amp;quot;&lt;/code&gt; ç„¶åä½¿ç”¨ &lt;a href=&#34;https://tools.keycdn.com/ping&#34;&gt;Ping Test&lt;/a&gt; è¿›è¡Œæµ‹è¯•ï¼š&lt;/p&gt;
&lt;center&gt;
    &lt;img src=&#34;https://32cf906.webp.li/2024/09/www-example-com-dns.png&#34; width=&#34;70%&#34; alt=&#34;GeoDNS æµ‹è¯•&#34;&gt;
&lt;/center&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸åŒçš„åœ°æ–¹å·²ç»å¯ä»¥è§£æåˆ°ä¸åŒçš„ IP äº†ï¼Œè¿™é‡Œ Loss 100% æ˜¯å› ä¸ºæµ‹è¯• IP éƒ½æ˜¯éšæœºç”Ÿæˆçš„ï¼Œç†è®ºä¸Šåº”è¯¥ä¹Ÿæ˜¯ ping ä¸é€šæ‰åˆç†ï¼Œæˆ‘ä»¬è¿™é‡Œæ¢æˆçœŸå®çš„ IP è¯•è¯•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;LAX: &lt;code&gt;67.198.150.72&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;AMS: &lt;code&gt;78.142.195.195&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;SIN: &lt;code&gt;89.28.239.46&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;center&gt;
    &lt;img src=&#34;https://32cf906.webp.li/2024/09/www-example-com-geodns-2.png&#34; width=&#34;70%&#34; alt=&#34;GeoDNS æµ‹è¯•&#34;&gt;
&lt;/center&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸åŒåœ°åŒºå·²ç»è§£æåˆ°ä¸åŒåœ°åŒºçš„ IP äº†ï¼Œå…¨çƒ Ping çš„å»¶è¿Ÿä¹Ÿéƒ½é™åˆ°äº† 100ms ä»¥ä¸‹(é™¤äº†å°åº¦ä»¥å¤–)ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»æ¥å…¥ç‚¹åˆ°é›†ç¾¤&#34;&gt;ä»æ¥å…¥ç‚¹åˆ°é›†ç¾¤&lt;/h2&gt;
&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç« é‡Œä¹ŸæåŠäº†é€šè¿‡ &lt;code&gt;IPTABLES&lt;/code&gt; ä»æ¥å…¥ç‚¹åˆ°é›†ç¾¤çš„ External IP çš„ç«¯å£è½¬å‘ï¼Œä½†æ˜¯ç»è¿‡æµ‹è¯•å‘ç°ï¼Œ&lt;code&gt;IPTABLES&lt;/code&gt; æ— æ³•åˆ©ç”¨ä¸€äº› TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ä»¥æé«˜ç½‘ç»œååå’Œå»¶è¿Ÿï¼Œç»è¿‡æ¿€æƒ…ç½‘ç»œå†²æµªï¼Œå‘ç°äº†å¦‚ä¸‹çš„ä¸€äº›å·¥å…·ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/zhboner/realm&#34;&gt;realm: A simple, high performance relay server written in rust&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/go-gost/gost&#34;&gt;gost: GO Simple Tunnel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://nginx.org/en/docs/stream/ngx_stream_core_module.html&#34;&gt;Nginx - Stream Module&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.haproxy.org/&#34;&gt;Haproxy&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¤§æ¦‚ä¸æ­¢è¿™å‡ ç§å·¥å…·ï¼Œåªæ˜¯éšæ‰‹ä¸¾å‡ºäº†è¿™å››ä¸ªã€‚è¿™äº›å¯¹æ¯” &lt;code&gt;IPTABLES&lt;/code&gt; çš„å¥½å¤„æ˜¯å¯ä»¥åˆ©ç”¨ BBR ç­‰ç®—æ³•è¿›ä¸€æ­¥æé«˜ TCP çš„ä¼ è¾“ã€‚åœ¨å¯¹æ¯”äº†ä¸€ç•ªä»¥åï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº† Nginxã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®‰è£…-nginx&#34;&gt;å®‰è£… Nginx&lt;/h3&gt;
&lt;p&gt;ä¸å¹³æ—¶å®‰è£… Nginx ç•¥å¾®ä¸åŒï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡ &lt;code&gt;apt&lt;/code&gt; å®‰è£…çš„ Nginx ä¸å¸¦ &lt;code&gt;stream&lt;/code&gt; æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code&gt;nginx -V | grep steram&lt;/code&gt; è¿›è¡ŒæŸ¥çœ‹ã€‚è¿™é‡Œæˆ‘é€‰æ‹©ç›´æ¥å»ä¸‹è½½æºç ç¼–è¯‘å®‰è£…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt -y install gcc make libssl-dev zlib1g-dev libgd-dev libgeoip-dev libpcre2-dev libpcre3-dev
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O nginx.tar.gz https://nginx.org/download/nginx-1.23.1.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tar -xvf nginx.tar.gz &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cd ./nginx-1.23.1/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo mkdir /usr/lib/nginx &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mkdir /var/log/nginx &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mkdir /etc/nginx &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mkdir /var/cache/nginx
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--prefix&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/etc/nginx &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--user&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;root &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--group&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;root &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--sbin-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/usr/sbin/nginx &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--modules-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/usr/lib/nginx/modules &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--conf-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/etc/nginx/nginx.conf &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--error-log-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/log/nginx/error.log &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--http-log-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/log/nginx/access.log &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--pid-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/run/nginx.pid &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--lock-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/run/nginx.lock &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--http-client-body-temp-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/cache/nginx/client_temp &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--http-proxy-temp-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/cache/nginx/proxy_temp &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--http-fastcgi-temp-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/cache/nginx/fastcgi_temp &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--http-uwsgi-temp-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/cache/nginx/uwsgi_temp &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--http-scgi-temp-path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/cache/nginx/scgi_temp &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-file-aio &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-threads &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_addition_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_auth_request_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_dav_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_flv_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_gunzip_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_gzip_static_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_mp4_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_random_index_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_realip_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_secure_link_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_slice_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_ssl_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_stub_status_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_sub_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-http_v2_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-mail &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-mail_ssl_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-stream &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-stream_realip_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-stream_ssl_module &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--with-stream_ssl_preread_module
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo make &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo make install &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mkdir /etc/nginx/sites-available &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo sudo mkdir /etc/nginx/sites-enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨å®Œæˆå®‰è£…åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ &lt;code&gt;systemd&lt;/code&gt; ä¸­åŠ å…¥é…ç½®æ–‡ä»¶å¯¹ service è¿›è¡Œæ§åˆ¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo su 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/systemd/system/nginx.service &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;[Unit]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Description=The NGINX HTTP and reverse proxy server
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;After=syslog.target network-online.target remote-fs.target nss-lookup.target
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Wants=network-online.target
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;[Service]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Type=forking
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;PIDFile=/run/nginx.pid
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;ExecStartPre=/usr/sbin/nginx -t -c /etc/nginx/nginx.conf
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;ExecStart=/usr/sbin/nginx -c /etc/nginx/nginx.conf
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;ExecReload=/usr/sbin/nginx -s reload -c /etc/nginx/nginx.conf
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;ExecStop=/bin/kill -s QUIT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;PrivateTmp=true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;[Install]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;WantedBy=multi-user.target
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl enable --now nginx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ—¶ï¼Œæˆ‘ä»¬åœ¨çœ‹ &lt;code&gt;nginx -V | grep stream&lt;/code&gt; å°±èƒ½å‘ç°æ¨¡å—å·²ç»æ­£å¸¸å®‰è£…äº†ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ stream æ¨¡å—ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ nginx å¯¹ TCP/UDP æµé‡è¿›è¡Œè½¬å‘ï¼ŒåŒæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡ SNI proxy æ¥è½¬å‘ HTTPS æµé‡åˆ°æºç«™ï¼Œè¿™é‡Œæˆ‘ç»™å‡ºä¸€ä¸ªæ ·ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;stream &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    upstream cluster &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        server 192.168.101.151:443;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        server 192.168.101.152:443;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    map $ssl_preread_server_name $upstream_server &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        default cluster;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    server &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        listen 443;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        proxy_pass $upstream_server;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ssl_preread on;  &lt;span style=&#34;color:#75715e&#34;&gt;# Enable SNI reading&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä» client åˆ° entrance å†åˆ° source çš„ä¸¤æ­¥èµ°æµç¨‹ã€‚å½“ç„¶ï¼Œé€‰æ‹© nginx çš„åŸå› ä¸ä»…ä»…æ˜¯ TCP åŠ é€Ÿï¼Œæ›´æ˜¯å› ä¸ºå¯ä»¥æ ¹æ®åŸŸåè¿›è¡Œä¸åŒåç«¯çš„åˆ†æµï¼Œè¿™äº›åº”è¯¥æ˜¯ IPTABLES/REALM è¿™äº›å·¥å…·æ— æ³•è¾¾åˆ°çš„ã€‚è€Œè‡³äºä¸ºä»€ä¹ˆä¸ç”¨ HAProxy åˆ™æ˜¯å› ä¸ºæœ¬äººä¸å–„äºä½¿ç”¨å®ƒï¼Œæ˜¯æˆ‘çš„é”™ã€‚&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;å…¶å®ä¹Ÿæ˜¯å› ä¸ºæ²¡æœ‰ AS å·åœ¨æ‰‹ï¼Œä¸ç„¶å°±æ˜¯ã€Œæˆ‘é€‰æ‹©è‡ªå»º Anycast DNS æœåŠ¡å™¨ã€äº† ï¼šï¼‰&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;æœ¬æ–‡ä¸­æ‰€æåŠçš„æ‰€æœ‰ IP åœ°å€ï¼ˆåŒ…æ‹¬ IPV4 å’Œ IPV6ï¼‰å‡æ˜¯é€šè¿‡ &lt;a href=&#34;https://www.ipvoid.com/&#34;&gt;IPVOID&lt;/a&gt; éšæœºç”Ÿæˆ&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34;&gt;
&lt;p&gt;ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœåŸŸåæœ¬èº«ä¸éœ€è¦ä½œä¸ºè‡ªèº«çš„ NS æœåŠ¡å™¨ï¼Œåˆ™æ— éœ€è®¾ç½®èƒ¶æ°´çºªå½•ï¼Œå³ï¼Œå¯ä»¥çœç•¥è¿™ä¸€æ­¥&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>ğŸ§‘ğŸ¿â€ğŸ’» Homelab: CloudFlare is All you Need</title>
      <link>https://blog.cklau.cc/post/my-homelab-7/</link>
      <pubDate>Sat, 10 Aug 2024 00:11:21 +0800</pubDate>
      <guid>https://blog.cklau.cc/post/my-homelab-7/</guid>
      <description>&lt;p&gt;å›åˆ°åŸç‚¹ï¼Œåˆå¼€å§‹äº†ä¸€å¹´ä¸€åº¦çš„ Homelab æŠ˜è…¾ã€‚è¿™ä¸€æ¬¡ï¼Œ æ‰“ç®—æ•´ç‚¹ã€Œèµ·å¤œã€çº§æ–¹æ¡ˆ :)&lt;/p&gt;
&lt;p&gt;ä½•ä¸ºä¼ä¸šçº§æ–¹æ¡ˆ?&lt;/p&gt;
&lt;p&gt;å¤§è‡´æ¥è¯´ï¼Œå°±æ˜¯å¾ˆç¨³ï¼Œéå¸¸ç¨³ï¼Œååˆ†æœ‰åäºŒåˆ†çš„ç¨³ã€‚è‡³å°‘æ˜¯æ­£å‘æ¨ç†çš„æ—¶å€™æ˜¯è¿™æ ·çš„ï¼Œè‡³äºæ„å¤–æƒ…å†µï¼Œä¸åˆ—å…¥è€ƒè™‘èŒƒå›´&lt;span class=&#34;sidenote-number&#34;&gt;
	&lt;small class=&#34;sidenote&#34;&gt;
	ä½œä¸ºä¼ä¸šçº§æ–¹æ¡ˆï¼Œè‡ªç„¶éœ€è¦æ˜¯éœ€è¦åº”æ€¥é¢„æ¡ˆï¼Œè‡³äºèƒ½ä¸èƒ½é‡ä¸Šå°±å†è®®
	&lt;/small&gt;
&lt;/span&gt;ã€‚ é‚£ä¹ˆä½œä¸ºä¸€ä¸ª &lt;code&gt;yaml&lt;/code&gt; ç©å®¶ï¼Œè‡ªç„¶è€Œç„¶çš„é€‰æ‹©å°±åªä¼šè½åœ¨ Kubernetes ä¹‹ä¸Šï¼Œè‡³äºå¦‚ä½•é€šè¿‡ &lt;code&gt;kubeadm&lt;/code&gt; æ­å»ºé«˜å¯ç”¨çš„ K8s é›†ç¾¤ï¼Œä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œè¯·å‚è€ƒä»¥å‰çš„æ–‡ç« ã€‚ å½“ç„¶ï¼Œä¸ºäº†&lt;ruby &gt;
    &lt;span&gt;å¢åŠ å¯è®¿é—®æ€§&lt;/span&gt;
    &lt;rp&gt;(&lt;/rp&gt;&lt;rt &gt;
            ç»•è¿‡åŸŸåå¤‡æ¡ˆ&lt;/rt&gt;&lt;rp&gt;)&lt;/rp&gt;
&lt;/ruby&gt;ï¼Œæˆ‘çš„ç¬¬ä¸€é€‰æ‹©å½“æ—¶æ˜¯é€‰æ‹©åœ°å¤„é¦™æ¸¯çš„æœåŠ¡å™¨ä½œä¸ºé›†ç¾¤çš„ä¸»æ§èŠ‚ç‚¹ã€‚æ— æ³•å¦è®¤çš„æ˜¯ï¼ŒAWS/Azure/GCP çš„æœåŠ¡å™¨æ˜¯æˆ‘ç­‰ç©·å­¦ç”Ÿæ— æ³•è´Ÿæ‹…å¾—èµ·çš„ï¼Œè€Œå°ä¼—å•†å®¶åˆæœ‰ç€æ¦‚ç‡è·‘è·¯/è¾ƒé«˜æ¦‚ç‡è¢«æ”»å‡»ï¼Œæœ¬ç€ã€Œèµ·å¤œçº§ã€çš„æ€æƒ³ï¼Œæœ€ç»ˆå°†é›†ç¾¤çš„ä¸»æ§èŠ‚ç‚¹å®šåœ¨äº†åƒç°ä¸­çš„è…¾è®¯äº‘å¹¿å·è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆç¨³å®šä¸”ä½å»¶è¿Ÿï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç»è¿‡å¾ˆå¤šå¹´çš„å¤§æµªæ·˜æ²™ä¹‹åï¼Œæ‰‹é‡Œä»…å‰©ä¸‹ä¸¤å°æœºå™¨&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼Œä¸€å°ä½œä¸ºä¸»å­˜å‚¨èŠ‚ç‚¹ (Riemann)ï¼Œè€Œå¦å¤–ä¸€å°åˆ™æ˜¯è®¡ç®—èŠ‚ç‚¹ (Nexus)ï¼Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œè®¡ç®—èŠ‚ç‚¹ä¸Šå…¶å®ä¹Ÿæ’äº†ä¸€äº›å­˜å‚¨ç”¨çš„ç¡¬ç›˜è€Œå­˜å‚¨èŠ‚ç‚¹ä¸Šä¹Ÿæœ‰ä¸€äº›è®¡ç®—èµ„æºã€‚ä¸ºäº†ä¸æµªè´¹å­˜å‚¨ä¸”å®Œæˆã€Œèµ·å¤œã€çº§çš„ä¸­å¿ƒæ€æƒ³ï¼Œæˆ‘é€‰æ‹©äº† GlusterFS ä½œä¸ºä¸»è¦çš„æ–‡ä»¶ç³»ç»Ÿã€‚è¯šç„¶ï¼Œ Ceph æ‰æ˜¯ä¸»æµï¼ŒGlusterFS è¿™ç§ç‰›å¤«äººæ‰æ˜¯&lt;del&gt;ç¨³å®šå¯é ä¹‹é€‰&lt;/del&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€åˆ‡éƒ¨ç½²å®Œæ¯•ä»¥åï¼Œå¦‚ä½•è®©èº«å¤„ UTC çš„æˆ‘å¿«é€Ÿè®¿é—® CST çš„å†…å®¹åˆ™æˆä¸ºäº†ä¸‹ä¸€ä¸ªä¼ä¸šçº§éš¾é¢˜ã€‚å¯¹äºçœŸæ­£çš„ä¼ä¸šæ¥è¯´ï¼Œå½“ç„¶ä¸éš¾ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;IPLC/IEPL ç›´æ¥æ‹‰ä¸“çº¿ï¼›ä½†ï¼Œæ¨ªè·¨äºšæ¬§å¤§é™†ï¼Œæˆ‘ç›¸ä¿¡ä¹Ÿä¸æ˜¯å¤šå°‘ä¼ä¸šå¯ä»¥æ‰¿æ‹…å¾—èµ·è¿™æ ·çš„ä¸“çº¿&lt;/li&gt;
&lt;li&gt;SD-WAN  ä¾æ‰˜æœåŠ¡å•†æä¾›çš„å…¨çƒä¼ è¾“ç½‘ç»œï¼Œé€šè¿‡ SDN æŠ€æœ¯åˆ°è¾¾ä¸åŒçš„ POP ç‚¹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è€ƒè™‘åˆ°å­‘ç„¶ä¸€äººçš„æˆ‘å¹¶æ²¡æœ‰å¤ªå®½è£•çš„ç»è´¹ï¼Œæœ€ç»ˆæ²¡æœ‰é€‰æ‹©ååˆ†å¤æ‚çš„æ–¹æ¡ˆï¼Œè€Œæ˜¯ä¾æ‰˜èµ›åšè©è¨&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;çš„å…¨çƒåŠ é€Ÿç½‘ç»œå®ç° SD-WAN çš„éƒ¨åˆ†åŠŸèƒ½ã€‚å½“ç„¶ï¼Œå¹¶ä¸æ˜¯å…¨ç¨‹ä¼ä¸šçº§ï¼Œè€Œæ˜¯ä¸€åŠä¼ä¸šçº§ã€‚å…ˆæ¥è¯´è¯´è¯´ã€Œèµ·å¤œã€çº§éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°èµ›åšè©è¨åœ¨ CST åœ°åŒºçš„ä½œç”¨æœ‰é™ï¼Œåœ¨ç­›é€‰äº†è®¸ä¹…åï¼Œæˆ‘é€‰æ‹©äº†å‡ ä¸ªä¸­è½¬ç‚¹ï¼šHKG/AMS/LAXã€‚åœ¨è¿™äº›åœ°æ–¹é€‰æ‹©å»‰ä»·ä¸”å“åº”è¿…é€Ÿçš„æœºå™¨ï¼Œæ¥å…¥åˆ°æˆ‘çš„èŠ‚ç‚¹ä¹‹ä¸­ï¼Œä½œä¸ºå‡ºç«™ç¬¬ä¸€æ­¥ã€‚æ³¨æ„ï¼Œè¿™äº›æœºå™¨å¹¶æ²¡æœ‰æ¥å…¥é›†ç¾¤ä¹‹ä¸­ï¼Œåªæ˜¯ä½œä¸ºä¸­è½¬ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šåšåˆ°äº†éš”ç¦»ï¼Œå› ä¸ºå³ä½¿è¿™äº›æœºå™¨æ²¦é™·/æœåŠ¡å•†è·‘è·¯æˆ‘çš„é›†ç¾¤ä¹Ÿä¸ä¼šæ”¶åˆ°å¤ªå¤§çš„ç‰µè¿&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;ã€‚è‡³äºå¦‚ä½•ä¸­è½¬ï¼Œåˆ™æ˜¯ Wireguard+VxLAN ä¸€æŠŠæ¢­å†åŠ ä¸€ç‚¹ç‚¹çš„ TCP ä»¥åº”å¯¹å…¨çƒ ISP å¯¹ UDP çš„åŠ£åŒ–ã€‚å¹¶ä¸”ï¼Œæˆ‘å¹¶æ²¡æœ‰å°†ä¸»æ§èŠ‚ç‚¹ä¸æµ·å¤–æœºå™¨äº’è”ï¼Œè¿™æ ·ä¹Ÿé™ä½äº†ä¸»æ§èŠ‚ç‚¹è¢«æ”»ç ´çš„é£é™©ã€‚è€Œè‡³äºä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥è®¿é—®ï¼Œå°±å…¨é  K8S çš„ External IP äº†:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨é…ç½® MetalLB çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º External IP æ± ï¼Œå¸¸è§„è®¾ç½®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠé‚£äº›å…¬ç½‘å¯è¾¾çš„ IP æ”¾è¿›å»ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œçš„è…¾è®¯äº‘çš„ IPï¼›ä½†åœ¨æˆ‘è¿™å¥—æ–¹æ¡ˆä¸­ï¼Œä»…éœ€è¦æŠŠ worker çš„å†…ç½‘ IP æ”¾å…¥å³å¯ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;metallb.io/v1beta1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;IPAddressPool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ip-pool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;metallb-system&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;addresses&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;192.168.101.101-192.168.101.102&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# Riemann å’Œ Nexus çš„å†…ç½‘ IPï¼Œéœ€è¦ä¸»æ§èŠ‚ç‚¹ä¹Ÿå¯ä»¥è®¿é—®çš„ IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;metallb.io/v1beta1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;kind&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;L2Advertisement&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;public-ip&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;namespace&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;metallb-system&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spec&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;ipAddressPools&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;ip-pool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;é…ç½® Ingress Controllerï¼Œæˆ‘ç›®å‰é€‰æ‹©çš„æ˜¯å®˜æ–¹çš„ &lt;a href=&#34;https://github.com/kubernetes/ingress-nginx&#34;&gt;ingress-nginx-controller&lt;/a&gt;ï¼›å¦‚æœæƒ³è¦å……åˆ†åˆ©ç”¨ IP æ± ä¸­çš„æ‰€æœ‰ IPï¼Œ æˆ‘ä»¬åˆ™éœ€è¦åˆ†åˆ«åˆ›å»ºä¸¤ä¸ª ingress controllerï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ¯ä¸€ä¸ª ingress controller éƒ½æ˜¯ Load Balancerï¼Œ æ‰€ä»¥ä¸€å…±å¯ä»¥æ‹¿åˆ°ä¸¤ä¸ª IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;helm upgrade --install ingress-nginx-a ingress-nginx --repo https://kubernetes.github.io/ingress-nginx --namespace ingress-nginx-a --create-namespace
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;helm upgrade --install ingress-nginx-b ingress-nginx --repo https://kubernetes.github.io/ingress-nginx --namespace ingress-nginx-b --create-namespace
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;IPTABLES&lt;/code&gt; ä¸€æŠŠæ¢­ï¼Œè®©å¤–éƒ¨æœåŠ¡å™¨è¿›è¡Œç«¯å£è½¬å‘ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å·¥å…·ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net.ipv4.ip_forward = 1&amp;#34;&lt;/span&gt; | sudo tee /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo iptables -t nat -A PREROUTING -p tcp -m multiport --dport 80,443 -j DNAT --to-destination 192.168.101.101:80
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo iptables -t nat -A POSTROUTING -p tcp -d 192.168.101.101 -m multiport --dport 80,443 -j SNAT --to-source 192.168.101.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‰æ­¥èµ°ä»¥åï¼Œã€Œèµ·å¤œã€çº§çš„é“¾è·¯å°±æ„é€ å®Œæˆäº†ï¼Œè¿™æ—¶åªéœ€è¦æˆ‘ä»¬å°†åŸŸåè§£æåˆ°å¤–éƒ¨æœåŠ¡å™¨çš„ IP ä¸Šå³å¯è®¿é—®é›†ç¾¤å†…éƒ¨éƒ¨ç½²çš„ web æœåŠ¡ã€‚ä¸è¿‡ï¼Œåªæœ‰ä¸‰ä¸ªèŠ‚ç‚¹æ€ä¹ˆæœåŠ¡å…¨çƒï¼Œè¿˜æ˜¯ä¸å¤Ÿå…¨é¢ã€‚ä¸€ä¸ªä¼ä¸šçº§çš„æ–¹æ¡ˆä¸€å®šè¦åšåˆ°å…¨çƒè¦†ç›–ã€‚é‚£æ­¤æ—¶å°±é‚€è¯·åˆ°èµ›åšè©è¨ç™»åœºäº†ã€‚Cloudflare ç»™æ¯ä¸ªç”¨æˆ·éƒ½æä¾›äº†ä¸€ä¸ªéš§é“æœåŠ¡å«åš &lt;a href=&#34;https://www.cloudflare.com/products/tunnel/&#34;&gt;ã€ŒCloudflare Tunnelã€&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Cloudflare Tunnel provides you with a secure way to connect your resources to Cloudflare without a publicly routable IP address. With Tunnel, you do not send traffic to an external IP â€” instead, a lightweight daemon in your infrastructure (cloudflared) creates outbound-only connections to Cloudflareâ€™s global network. Cloudflare Tunnel can connect HTTP web servers, SSH servers, remote desktops, and other protocols safely to Cloudflare. This way, your origins can serve traffic through Cloudflare without being vulnerable to attacks that bypass Cloudflare.
æ‘˜è‡ª &lt;a href=&#34;https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/&#34;&gt;Cloudflare Tunnel å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæåˆ°ï¼ŒCloudflare å®é™…ä¸Šæ˜¯ä»å†…ç½‘ç›´æ¥åˆ° Cloudflare çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œè€Œä¸éœ€è¦æœåŠ¡éƒ¨ç½²åœ¨ä¸€ä¸ªå…¬ç½‘å¯è¾¾çš„æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯åœ¨è¿™é‡Œï¼Œæˆ‘åœ¨ç›´å°†ä¸‰ä¸ªå…¬ç½‘å¯è¾¾çš„æœåŠ¡å™¨ä½œä¸ºè¿æ¥è¾¹ç¼˜èŠ‚ç‚¹å’ŒæºæœåŠ¡å™¨çš„ä¸­é—´è·³æ¿ï¼Œè€Œå…¶ä¸­çš„è·³æ¿å°±æ˜¯ CF Tunnelã€‚è¿™æ ·å¸ƒç½®çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬çš„å›æºè·¯å¾„ä¸éœ€è¦ç»è¿‡çº·ç¹å¤æ‚çš„å…¬ç½‘ç»è¿‡æ— æ•°çš„ pop å’Œæ— å°½çš„ç»•è·¯ï¼Œè¢« BGP è½¬çš„æ™•å¤´è½¬å‘ï¼Œæœ€ç»ˆé—å¤±åœ¨å¤ªå¹³æ´‹ï¼›æµé‡åœ¨è¿›å…¥ CF Tunnel ä¼šå»å¯»æ‰¾ç¦»è‡ªå·±æœ€è¿‘çš„â€œæºâ€ç«™ï¼Œç„¶åä¸‹ä¸€è·³å°±æ˜¯â€æºâ€œç«™ï¼ˆé›†ç¾¤ï¼‰äº†&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;ã€‚ Tunnel ä¼šè‡ªåŠ¨å¯»æ‰¾æœ€è¿‘çš„â€œæºâ€ç«™ä¹Ÿæ˜¯å®˜æ–¹æ–‡æ¡£æåŠçš„ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;By design, replicas(æ˜¯æŒ‡ cloudflared replicas) do not offer any level of traffic steering (random, hash, or round-robin). Instead, when a request arrives to Cloudflare, &lt;strong&gt;it will be forwarded to the replica that is geographically closest&lt;/strong&gt;. If that distance calculation is unsuccessful or the connection fails, we will retry others, but there is no guarantee about which connection is chosen.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹äº Cloudflare æ¥è¯´ï¼Œå¯èƒ½ä»˜è´¹ç”¨æˆ·éœ€è¦çš„æ˜¯ traffic steeringï¼Œä½†å®é™…ä¸Šï¼Œæˆ‘éœ€è¦çš„æ˜¯ geo steeringã€‚è‡ªæ­¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¾æ´²ç”¨æˆ·å¤§æ¦‚ç‡ä¼šè¿›å…¥éš§é“åˆ°è¾¾ LAXï¼Œç„¶åè·¨è¶Šå¤ªå¹³æ´‹å›æºï¼›&lt;/li&gt;
&lt;li&gt;æ¬§æ´²å’Œéƒ¨åˆ†äºšç»†äºšç”¨æˆ·ä¼šåˆ° AMSï¼Œç„¶åèµ°äº¬å¾·çº¿è·¯å›æºï¼›&lt;/li&gt;
&lt;li&gt;å…¶ä»–äºšç»†äºšå’Œå¤§æ´‹æ´²ç”¨æˆ·ä¼šåˆ°è¾¾ HKGï¼Œç„¶åå›æºï¼›&lt;/li&gt;
&lt;li&gt;ç›®å‰ï¼Œæ²¡æœ‰æµ‹è¯•è¿‡éæ´²çš„ä½“éªŒï¼Œæ‰€ä»¥æš‚ä¸”æ²¡æœ‰ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è®ºä¸Šä¼¼ä¹ä¼šæœ‰åŠ é€Ÿï¼Œé‚£å®é™…ä¸Šæµ‹è¯•å‘¢ï¼Ÿæˆ‘ç”¨ &lt;a href=&#34;https://www.dotcom-tools.com/&#34;&gt;dotcom-tools&lt;/a&gt; å¯¹ç½‘ç«™æ‰“å¼€é€Ÿåº¦è¿›è¡Œæµ‹è¯•ï¼Œé€‰å–äº†é©¬å¾·é‡Œã€åç››é¡¿å’Œé¦™æ¸¯è¿›è¡Œæµ‹è¯•ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ°ä¸‰åœ°å¹³å‡è®¿é—®é€Ÿåº¦ç¡®å®æ˜¯æœ‰æ‰€æå‡ï¼Œè€Œå…¶ä¸­åç››é¡¿åœ°åŒºçš„æµ‹è¯•ä¸å‡åé™ï¼Œè¿™ä¸ªå¯èƒ½æ˜¯æœ¬èº«æµ‹è¯•èŠ‚ç‚¹åˆ°â€œæºâ€ç«™çš„è·¯ç”±æ¯” CF çš„å¥½å§ï¼Œä¹Ÿæœ‰å¯èƒ½ CF å¸¦è¿™äº›æµé‡å»äº†æ¬§æ´²ï¼Œè¿™å°±ä¸å¾—è€ŒçŸ¥äº†ã€‚ä¸è¿‡æ€»ä½“è€Œè¨€ï¼Œå®éªŒåº”å½“ç®—ä½œæˆåŠŸã€‚&lt;/p&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;img src=&#34;https://32cf906.webp.li/2024/08/media-before-cf.png&#34; /&gt;&lt;/td&gt;
        &lt;td&gt;&lt;img src=&#34;https://32cf906.webp.li/2024/08/media-cf-speedup.png&#34;/&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;center&gt;Before&lt;/center&gt;&lt;/td&gt;
        &lt;td&gt;&lt;center&gt;After&lt;/center&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;è‡ªæ­¤ï¼Œå…¨çƒåŠ é€Ÿéƒ¨åˆ†åˆ°æ­¤ç»“æŸã€‚å¤§æ¦‚çš„æœ‰ç‚¹æœ‰å¦‚ä¸‹å‡ æ¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»»æ„æ·»åŠ æ¥å…¥ç‚¹ï¼šæˆ‘ä»¬ä»…éœ€è¦è®©æ–°å¢èŠ‚ç‚¹å’Œé›†ç¾¤å»ºç«‹é€šç•…è¿æ¥ï¼Œå³å¯éšæ—¶å¢ï¼ˆåˆ ï¼‰æ¥å…¥ç‚¹ï¼Œä¸»è¦ç›®çš„æ˜¯ç”¨æ¥åº”å¯¹ä¸åŒç½‘ç»œæ³¢åŠ¨å’Œ VPS æœåŠ¡å•† SLA æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;éšè—æºç«™å’Œé™ä½è´¹ç”¨ï¼šå¦‚æœä½¿ç”¨ GeoDNS å’Œ CDN è¿›è¡ŒåŠ é€Ÿï¼Œåˆ™éœ€è¦æ”¯ä»˜ DNS åˆ†åŒºè§£æå’Œå¯¹åº” CDN çš„è´¹ç”¨ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œèµ›åšè©è¨çš„ DNS æ²¡æœ‰åˆ†åŒºè§£æï¼ŒGeo steering éœ€è¦ä»˜è´¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“ç„¶ï¼Œå®é™…ä¸Šæ–¹æ¡ˆä¾æ—§å­˜åœ¨ç¼ºé™·ï¼Œä¾‹å¦‚ï¼Œæ¥å…¥ç‚¹å’Œé›†ç¾¤è¿æ¥éœ€è¦æ‰‹åŠ¨é…ç½®ï¼ŒCF è·¯ç”±é»‘ç®±ã€‚å½“ç„¶ï¼Œå‰è€…æ˜¯æˆ‘çš„é—®é¢˜ï¼Œåè€…ä¹Ÿæ˜¯æˆ‘çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;å®é™…ä¸Šæœ‰äº›åæ‚”ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯å­˜å‚¨èŠ‚ç‚¹å«åš Nexus è®¡ç®—èŠ‚ç‚¹ Riemannï¼Œè¿™æ ·æ‰ç¬¦åˆäººè®¾ã€‚&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;èµ›åšè©è¨ä¹‹æ‰€ä»¥æ˜¯è©è¨ï¼Œæ˜¯å› ä¸ºå–„ã€‚&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34;&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©è…¾è®¯äº‘çš„æœåŠ¡å™¨ä½œä¸ºä¸»æ§èŠ‚ç‚¹çš„åŸå› ï¼Œæ¯•ç«Ÿæ˜¯å¤§å‚ã€‚&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:4&#34;&gt;
&lt;p&gt;è¿™é‡Œæåˆ°çš„ã€Œä¸‹ä¸€è·³ã€æ˜¯æŒ‡ overlay ç½‘ç»œé‡Œçš„ï¼Œå®é™…ä¸Šè¿˜æ˜¯éœ€è¦ç»è¿‡å¾ˆå¤š popï¼Œåªä¸è¿‡å› ä¸ºéƒ½åœ¨è¿™ä¸ªå¤§å†…ç½‘é‡Œä¸ä¼šè¢«å±•ç¤ºå‡ºæ¥ã€‚&amp;#160;&lt;a href=&#34;#fnref:4&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
    </item>
    
  </channel>
</rss>