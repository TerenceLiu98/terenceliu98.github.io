<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>k3s on 若如笔记</title>
    <link>https://blog.rho.ac.cn/tags/k3s/</link>
    <description>Recent content in k3s on 若如笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <copyright>Copyright © 2005–2022, Terence Junjie LIU; all rights reserved.</copyright>
    <lastBuildDate>Sun, 02 Oct 2022 10:00:00 +0800</lastBuildDate><atom:link href="https://blog.rho.ac.cn/tags/k3s/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>K3s/Kubernetes - 番外：自建 Docker 镜像站</title>
      <link>https://blog.rho.ac.cn/post/k3s-setup-extra-1/</link>
      <pubDate>Sun, 02 Oct 2022 10:00:00 +0800</pubDate>
      
      <guid>https://blog.rho.ac.cn/post/k3s-setup-extra-1/</guid>
      <description>正如我在K3s Setup 2中提到的，通常中国用户访问https: //gcr.io、https://k8s.gcr.io 或 https://ghcr.io。 因此，在这种情况下，我们可以设置一个服务器作为注册代理端点。
一些选项 DockerHub 提供了一个名为 Docker Registry 的“官方”包，它是一个无状态、高度可扩展的服务器端应用程序，可以存储并让用户分发 Docker 镜像。
Nexus Repository OSS，由 Sonatype 提供，是一个开源存储库，支持多种工件格式，包括 Docker、Java™ 和 npm。
由 VMWare 提供的 Harbor 是一个开源注册表，它通过策略和基于角色的访问控制来保护工件，确保图像被扫描并且没有漏洞，并将图像签名为可信的。
Nexus 作为 Registry 代理 我们很容易构建 Nexus，只需使用 docker-compose.yml：
version: &amp;#34;3.7&amp;#34; services: nexus: image: sonatype/nexus3:latest environment: INSTALL4J_ADD_VM_PARAMS: -Xms128m -Xmx512m -XX:MaxDirectMemorySize=512m # decrease the occupancy rate of nexus container_name: nexus3 restart: always ports: - 8081:8081 # port of frontend of the nexus repo - 8082:8082 # port of the docker proxy volumes: - .</description>
    </item>
    
    <item>
      <title>K3s/Kubernetes - 配置高可用 K3s 集群</title>
      <link>https://blog.rho.ac.cn/post/k3s-setup-2/</link>
      <pubDate>Mon, 26 Sep 2022 00:11:21 +0800</pubDate>
      
      <guid>https://blog.rho.ac.cn/post/k3s-setup-2/</guid>
      <description>在此之前 按照 K3s 的文档 生成基本的 K3s 集群非常容易。 让我们尝试将其修改为 High Availability Cluster。 单个服务器集群可以满足各种用例，但对于 Kubenetes 控制平面的正常运行时间至关重要的环境，我们需要高可用性配置。 高可用性有两种方式：
 High Availability with an External DB (for example, PostgreSQL, MySQL, MariaDB) High Availability with Embedded DB (etcd)  我选择了第二个——带有嵌入式数据库:
K3s 安装 K3s 控制节点 为了设置服务器，我按照 K3s 的说明稍作修改，因为我想自定义网络和节点名称。 这是我用于服务器安装的命令：
curl -sfL https://get.k3s.io | K3S_TOKEN=&amp;lt;token&amp;gt; INSTALL_K3S_EXEC=&amp;#34;server \ --node-ip &amp;lt;wg-node-ip&amp;gt; \ --advertise-address &amp;lt;node-public-ip&amp;gt; \ --node-external-ip &amp;lt;node-public-ip&amp;gt; \ --flannel-iface wg0 \ --node-name &amp;lt;node-name&amp;gt; \ --cluster-init &amp;#34; sh - # for whom can not access Google and Github fluently, you may try: curl -sfL https://rancher-mirror.</description>
    </item>
    
    <item>
      <title>K3s/Kubernetes - 快速启动 K3s 服务</title>
      <link>https://blog.rho.ac.cn/post/k3s-setup-1/</link>
      <pubDate>Sat, 24 Sep 2022 00:11:21 +0800</pubDate>
      
      <guid>https://blog.rho.ac.cn/post/k3s-setup-1/</guid>
      <description>在此之前 K3s是一个更适合 Edge/IoT/CI/ARM 场景/设备的轻量级 Kubernetes。 通常，对于人来说，我们没有像 24c 服务器甚至更高的多个高性能设备。 因此，K3s 是我们学习如何设置 kubernetes 集群的一种方式。
对我来说，多年前我是一个裸机狂热者，但是当我对虚拟化和容器有了更多的了解后，我变成了一个 Docker 用户。 这些操作系统级别的虚拟化在我们尝试迁移我们的服务时更加方便，例如博客迁移、身份验证迁移等。
部署环境 这是我的设备列表：
   设备名称 设备所在地 设备规格 OS Network IP     hilbert(server) Tencent Cloud (SH-CN) 4C8G Ubuntu 20.04 LTS Pbulic IP + Wireguard 1.xx.xx.xx + 192.168.36.1   cantor(server) Tencent Cloud (SH-CN) 2C4G Ubuntu 20.04 LTS Pbulic IP + Wireguard 110.xx.xx.xx + 192.168.36.2   newton(worker) Tencent Cloud (GZ-CN) 1C2G Ubuntu 20.</description>
    </item>
    
  </channel>
</rss>
