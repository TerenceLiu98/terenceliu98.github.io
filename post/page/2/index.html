<!DOCTYPE html>
<html lang="en"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>特倫蘇的日與夜</title>
    <meta charset="utf-8">
    <meta name="description" content="Post - 特倫蘇的日與夜">
    <meta name="author" content="Junjie LIU">
    <link rel="canonical" href="http://localhost:1313/post/">
        <meta name="google-site-verification" content="GTM-MC97JQPW">

    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PXB7GSCQBT"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-PXB7GSCQBT', { 'anonymize_ip': false });
}
</script>



    <meta property="og:title" content="Post" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/post/" />


<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Post"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Post",
      "item": "http://localhost:1313/post/"
    }
  ]
}
</script>
    <link rel="icon" type="image/png" href="/images/logo.svg" sizes="16x16">

<link rel="apple-touch-icon" href="/images/logo.svg">

<link rel="manifest" href="/images/logo.svg">
    
    

    
    
    
    <link rel="stylesheet" href="/css/main.css" media="screen">
    


    
    <link rel="stylesheet" href="/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css" />

    
    <script src="/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js"></script>
    <script>hljs.highlightAll();</script>

    <script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script>
    
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
</head>
<body><nav class="navigation">
    <section class="container">
        <a class="navigation-brand" href="/">
            CKLAU&#39;s WEBSITE
        </a>
        <input type="checkbox" id="menu-toggle" />
        <label class="menu-button float-right" for="menu-toggle">
            <span></span><span></span><span></span>
        </label>
        
        <ul class="navigation-list" id="navigation-list">
            
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/post">Blog</a>
            </li>
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/post/scientia">Scientia</a>
            </li>
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/friends">Friends</a>
            </li>
            
            

            <li class="navigation-item menu-separator">
                <span>|</span>
            </li>

            
            
            <li class="navigation-item navigation-social">
                <a class="navigation-link" href="https://terenceliu98.github.io/index.xml"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
            </li>
            
            <li class="navigation-item navigation-social">
                <a class="navigation-link" href="https://github.com/TerenceLiu98"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
            </li>
            
            

            <li class="navigation-item navigation-dark">
                <button id="mode" type="button" aria-label="toggle user light or dark theme">
                    <span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
                    <span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
                </button>
            </li>

            
            
            
            
            
            <li class="navigation-item navigation-language">
                <a href="http://localhost:1313/zh/post/">中</a>
            </li>
            
            
            
            
        </ul>
        
    </section>
</nav>
<main class="wrapper">
        <div id="content">
<div class="blog-wrapper">
  <div>
    <div class="card">
      <h1>Post</h1>
      
    </div>
    <div class="card-list">
      
      <article>
        <div class="card">
          <h3><a href="/post/k3s-setup-extra-1/">🧑🏿‍💻 K3s/Kubernetes - Set up a K3s Cluster with your VPS (Extra Story 1)</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/k3s/">K3s</a></u>
    
    <u># <a href="http://localhost:1313/tags/kubernetes/">Kubernetes</a></u>
    
    <u># <a href="http://localhost:1313/tags/docker/">Docker</a></u>
    
    <u># <a href="http://localhost:1313/tags/registry/">Registry</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>October 2, 2022</u> (Last updated on: <u>August 5, 2024)</u> <br>
    650 words&nbsp;· 4 min</small>
</p>

          As I have mentioned in K3s Setup 2, usually, it is not easy for the China&rsquo;s user to access https://gcr.io, https://k8s.gcr.io or https://ghcr.io. Thus, under this circumstance, we may set up a server as the registry proxy endpoint.
Some options DockerHub provide a &ldquo;offical&rdquo; package called Docker Registry where it is a stateless, hightly scalable server side application that stores and lets users distribute Docker images.
Nexus Repository OSS, provided by Sonatype, is an open source repository that supports many artifact formats, including Docker, Java™, and npm.
        </div>
      </article>
      
      <article>
        <div class="card">
          <h3><a href="/post/k3s-setup-2/">🧑🏿‍💻 K3s/Kubernetes - Set up a K3s Cluster with your VPS (2)</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/k3s/">K3s</a></u>
    
    <u># <a href="http://localhost:1313/tags/kubernetes/">Kubernetes</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>September 26, 2022</u> (Last updated on: <u>August 5, 2024)</u> <br>
    1243 words&nbsp;· 6 min</small>
</p>

          Generating a basic K3s cluster is quite easy by following the K3s&rsquo;s Doc. let try to modify it into High Availability Cluster. Single server cluster can meet a variety of use cases, but for environments where uptime of the Kubenetes control plane is critical, where we need the High Availability configuration. There are two ways for High Availability:
High Availability with an External DB (for example, PostgreSQL, MySQL, MariaDB) High Availability with Embedded DB (etcd) I chose the second one - with Embedded DB.
        </div>
      </article>
      
      <article>
        <div class="card">
          <h3><a href="/post/k3s-setup-1/">🧑🏿‍💻 K3s/Kubernetes - Set up a K3s Cluster with your VPS (1)</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/k3s/">K3s</a></u>
    
    <u># <a href="http://localhost:1313/tags/kubernetes/">Kubernetes</a></u>
    
    <u># <a href="http://localhost:1313/tags/wireguard/">Wireguard</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>September 24, 2022</u> (Last updated on: <u>September 26, 2022)</u> <br>
    382 words&nbsp;· 2 min</small>
</p>

          Before K3s is a lightweight Kubernetes which is more suitable for the Edge/IoT/CI/ARM scenario/devices. Usually, for person, we do not have multiple high-performance device like 24c server or even higher. Hence, K3s is a way we can learn how to set up a kubernetes cluster.
For me, I am a bare metal fanatic many year ago, but I changed into a Docker user after I know more about virtualization and containers.
        </div>
      </article>
      
      <article>
        <div class="card">
          <h3><a href="/post/my-homelab-4/">🧑🏿‍💻 Homelab: Don&#39;t Let the Docker escape from the ufw&#39;s control</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/homelab/">Homelab</a></u>
    
    <u># <a href="http://localhost:1313/tags/networking/">Networking</a></u>
    
    <u># <a href="http://localhost:1313/tags/docker/">Docker</a></u>
    
    <u># <a href="http://localhost:1313/tags/ufw/">Ufw</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>July 21, 2022</u> (Last updated on: <u>August 5, 2024)</u> <br>
    377 words&nbsp;· 2 min</small>
</p>

          &ldquo;Uncomplicated firewall&rdquo;, a.k.a, UFW, is the new/next-generation of firewall of Linux system. As says in its name, &ldquo;uncomplicated&rdquo; is the feature. However, in some situation, it is still complicated, for example, works with Docker.
Usually, for the homelab/VPS, we self-host a bunch of services and use them with reverse proxy (like Nginx, Caddy, Traefik) with different subdomain. However, Docker tries to modify the firewall rules without notification, like this:
ubuntu@myserver:~$ sudo ufw status Status: active To Action From -- ------ ---- 80 ALLOW Anywhere 443 ALLOW Anywhere 22 ALLOW Anywhere 80 (v6) ALLOW Anywhere (v6) 443 (v6) ALLOW Anywhere (v6) 22 (v6) ALLOW Anywhere (v6) In ufw list, I only allow the SSH port and HTTP/HTTPS ports.
        </div>
      </article>
      
      <article>
        <div class="card">
          <h3><a href="/post/my-homelab-2/">🧑🏿‍💻 Homelab: My Distributed Homelab</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/homelab/">Homelab</a></u>
    
    <u># <a href="http://localhost:1313/tags/networking/">Networking</a></u>
    
    <u># <a href="http://localhost:1313/tags/hardware/">Hardware</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>July 21, 2022</u> (Last updated on: <u>August 5, 2024)</u> <br>
    1482 words&nbsp;· 7 min</small>
</p>

          Networking For the homelab, I would like to choose a commerical company&rsquo;s product, as the service can be guaranteed by the company reputation. All my devices can connect to the WAN via NAT1 such that I don&rsquo;t need the nat passthrough solution. I choose Tailscale as I mentioned, it performs well under my testing. Just follow the instruction and the networking problem is solved.
Service For the homelab, I would like to docker as it is very covinence and can set up easily.
        </div>
      </article>
      
      <article>
        <div class="card">
          <h3><a href="/post/my-homelab-3/">🧑🏿‍💻 Homelab: My Network setup</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/homelab/">Homelab</a></u>
    
    <u># <a href="http://localhost:1313/tags/networking/">Networking</a></u>
    
    <u># <a href="http://localhost:1313/tags/wireguard/">Wireguard</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>July 21, 2022</u> (Last updated on: <u>August 5, 2024)</u> <br>
    239 words&nbsp;· 2 min</small>
</p>

          In General Tools I use I choose Wireguard since it’s fast because of its light design, and it’s secure because it uses the best cryptographic tools available. However, for each time, the user may need to consider a SUBNET for the wireguard and a IP for each node, for me, it is every annoyed, as I have too many subnet need to be configured. Thus, I build a little tool: wgtools
        </div>
      </article>
      
      <article>
        <div class="card">
          <h3><a href="/post/my-homelab-1/">🧑🏿‍💻 Homelab: My Devices</a></h3>
          <p>
  <small>
    
    
    
    <u># <a href="http://localhost:1313/tags/homelab/">Homelab</a></u>
    
    <u># <a href="http://localhost:1313/tags/networking/">Networking</a></u>
    
    <u># <a href="http://localhost:1313/tags/hardware/">Hardware</a></u>
    
  </small>
  <br>
  <small>
    Published On: <u>July 20, 2022</u> (Last updated on: <u>August 5, 2024)</u> <br>
    613 words&nbsp;· 3 min</small>
</p>

          For a long time, I held many different digital gadgets, however, I did not consider putting them into a cluster, or more precisely, setting up a platform where I can easily manage them. In this summer vacation, I started thinking of a possibility of setting up a distributed homelab.
Why Distributed Since I am wandering around the big bay area, multiple different devices are scattered. Thus, I have to build a distributed cluster.
        </div>
      </article>
      </div>
    
    <div class="paginator">
      
      <a class="prev" href="/post/">&larr;&nbsp;&nbsp;Pre Page</a>
      
      
    </div>
    
  </div>
</div>

        </div>
      </main><footer class="footer">
  <p>&copy; 2024 <a href="http://localhost:1313/">特倫蘇的日與夜</a> &nbsp;
    
        <span><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备2022102668号</a></span>
    
️  </p>
</footer>

<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>
</a>

<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>

<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'Copy';

        function copyingDone() {
            copybutton.innerHTML = 'Copied';
            setTimeout(() => {
                copybutton.innerHTML = 'Copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });
        codeblock.parentNode.appendChild(copybutton);
    });
</script></body><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
      const images = Array.from(document.querySelectorAll(".blog-content img"));
      images.forEach(img => {
          mediumZoom(img, {
              margin: 10,  
              scrollOffset: 40,  
              container: null,  
              template: null,  
              background: 'rgba(0, 0, 0, 0.5)'
          });
      });
  </script>

  
  <script src="/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js" integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin="anonymous" defer></script></html>